{"mappings":"AAAA,MAAMA,QAAUC,SAASC,eAAe,SAClCC,OAASF,SAASC,eAAe,QACjCE,KAAOH,SAASC,eAAe,MAC/BG,WAAaJ,SAASC,eAAe,YACrCI,WAAaL,SAASC,eAAe,YACrCK,UAAYN,SAASC,eAAe,W,MA6DvCM,IAEDC,IAAS,E,gCAQPC,KAAAC,gBACAD,MAAKE,EAAUC,EAAAC,KAAM,CAAQC,QAAG,2BAAEC,SAAG,CAAG,GAAM,IAG/CC,WAAA,CAED,GACI,IAIEC,YAAC,EAEG,GAEA,IAGJC,WAAc,CAMd,GAGA,IAQJC,aAAkB,CAElB,GACQ,M,OAGPC,iBAAA,SAAAX,KAAAY,cAAAC,KAAAb,O,SAIDc,EAAUC,GAEVf,MAAAgB,EAAWb,EAAEa,IAAG,OAAKC,QAAS,CAC9BH,EAEIC,GACJ,IAGAZ,EAAAe,UAAW,qDAA8C,CACzDC,YAAU,4FAEVC,MAAQpB,MAAKgB,GAGbhB,MAAAqB,EAAA,IAAmBlB,EAAAkB,OAAA,CAEnBP,EAEIC,G,CAEFX,KAAMJ,MAAAE,I,MAAuBF,MAAGgB,G,cAAQM,G,mBAC7B,K,QAD0DC,Q,KAGrEtB,cAAUX,QAAQiC,MAAAC,Q,QAACD,MAAG,G,QAAEE,S,oBACfC,QACFC,I,GAAA,GAAAD,IAAAE,OAAA,QAAED,I,IAAW,GAAAD,IAAAE,OAAA,QAAA5B,MAAA6B,EAAA,+FAAAH,UAAEC,I,IAAA3B,MAAA6B,EAAA,qF,MACpBC,QAACC,MAAA/B,MAAA6B,GAEH,IAAAC,EAAAE,GAEA,YADAC,MAAA,SAAAH,EAAAI,WAAAJ,EAAAK,cAGAnC,MAAAD,GAAAC,MAAAgB,EAA0BoB,YAAApC,MAAAqB,GAC1B,MAAMgB,QAAAP,EAAAQ,QACNxB,OAAUuB,EAAAE,UACXxB,OAAAsB,EAAAE,S,GAED7C,KAAI8C,YAAeH,EAAAI,G,WACZD,YAAc,GAAKH,EAAAE,SAAAG,SAAAL,EAAAE,SAAAI,UAAAN,EAAAE,SAAAK,WAAAP,EAAAE,SAAAK,WAAA,K,WAClBJ,YAAe,OAACH,EAAAE,SAAAM,W,UACvBL,YAAAH,EAAAS,IAAAC,MAAA,KAAAnB,MAAA,KAAAoB,KAAA,KACF1D,QAAAiC,MAAA,G","sources":["script.js"],"sourcesContent":["const inputEl = document.getElementById(\"input\");\r\nconst formEl = document.getElementById(\"form\");\r\nconst ipEl = document.getElementById(\"ip\");\r\nconst locationEl = document.getElementById(\"location\");\r\nconst timezoneEl = document.getElementById(\"timezone\");\r\nconst serviceEl = document.getElementById(\"service\");\r\n\r\n/*\r\n\r\nlet myIcon = L.icon({\r\n    iconUrl: \"images/icon-location.svg\",\r\n    iconSize: [46, 56],\r\n    iconAnchor: [22, 94],\r\n    popupAnchor: [-3, -76],\r\n    shadowSize: [68, 95],\r\n    shadowAnchor: [22, 94],\r\n});\r\n\r\n*/\r\n\r\n/*\r\n\r\n// domain: 'https://www.digitalsatellite.in/'\r\n\r\n// domains:\r\n// 000000000000000000000000000000000.xyz\r\n// 000180.top\r\n// 000xs.net\r\n// 00154021-836e-4c82-9fb4-fb4abf951347.pong.s.elliq.co\r\n// 001cdaee-0a08-4779-987f-b6b612361079.pong.s.elliq.co\r\n\r\n// 192.212.174.101\r\n\r\n// 103.120.253.62\r\n\r\n// https://geo.ipify.org/api/v2/country?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&ipAddress=8.8.8.8\r\n\r\n`https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA`\r\n\r\n`https://geo.ipify.org/api/v2/country?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&ipAddress=${ipAddress}`\r\n\r\n`https://geo.ipify.org/api/v2/country?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&domain=${ipAddress}`\r\n\r\n*/\r\n\r\nclass App {\r\n  #isFirst = true;\r\n  #url;\r\n  #map;\r\n  #lat;\r\n  #lng;\r\n  #myIcon;\r\n  #marker;\r\n\r\n  constructor() {\r\n    this._getIpAddress();\r\n    this.#myIcon = L.icon({\r\n      iconUrl: \"images/icon-location.svg\",\r\n      iconSize: [46, 56],\r\n      iconAnchor: [22, 94],\r\n      popupAnchor: [-3, -76],\r\n      shadowSize: [68, 95],\r\n      shadowAnchor: [22, 94],\r\n    });\r\n\r\n    formEl.addEventListener(\"submit\", this._newIpAddress.bind(this));\r\n  }\r\n\r\n  _loadMap(lat, lng) {\r\n    this.#map = L.map(\"map\").setView([lat, lng], 14);\r\n\r\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n      attribution:\r\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n    }).addTo(this.#map);\r\n\r\n    // L.marker([lat, lng], { icon: this.#myIcon }).addTo(this.#map);\r\n    this.#marker = new L.marker([lat, lng], { icon: this.#myIcon }).addTo(\r\n      this.#map\r\n    );\r\n  }\r\n\r\n  _newIpAddress(e) {\r\n    e.preventDefault();\r\n\r\n    if (inputEl.value === \"\") return;\r\n\r\n    this._getIpAddress(inputEl.value.trim());\r\n\r\n    inputEl.value = \"\";\r\n\r\n    inputEl.focus();\r\n  }\r\n\r\n  async _getIpAddress(ipAddress) {\r\n    // L.marker([this.#lat, this.#lng], { icon: this.#myIcon }).removeFrom(\r\n    // this.#map\r\n    // );\r\n    // console.log(ipAddress);\r\n\r\n    if (ipAddress !== undefined && +`${ipAddress}`.slice(-3) === NaN) {\r\n      this.#url = `https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&domain=${ipAddress}`;\r\n    }\r\n    if (ipAddress !== undefined && +`${ipAddress}`.slice(-3) !== NaN) {\r\n      this.#url = `https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&ipAddress=${ipAddress}`;\r\n    }\r\n    if (ipAddress === undefined) {\r\n      this.#url =\r\n        \"https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA\";\r\n    }\r\n\r\n    const res = await fetch(this.#url);\r\n\r\n    // console.log(res);\r\n    if (!res.ok) {\r\n      alert(`Error ${res.status}. ${res.statusText}`);\r\n      return;\r\n    }\r\n\r\n    if (!this.#isFirst) this.#map.removeLayer(this.#marker);\r\n\r\n    const data = await res.json();\r\n\r\n    const { lat } = data.location;\r\n    const { lng } = data.location;\r\n\r\n    ipEl.textContent = data.ip;\r\n    locationEl.textContent = `${data.location.city}, ${data.location.region} ${\r\n      data.location.postalCode ? data.location.postalCode : \"\"\r\n    }`;\r\n    timezoneEl.textContent = `UTC ${data.location.timezone}`;\r\n    serviceEl.textContent = data.isp.split(\" \").slice(0, 3).join(\" \");\r\n\r\n    inputEl.value = \"\";\r\n\r\n    // this.#lat = lat;\r\n    // this.#lng = lng;\r\n\r\n    console.log(data);\r\n\r\n    if (!this.#isFirst) {\r\n      // console.log(lat, lng);\r\n      this.#marker = new L.marker([lat, lng], { icon: this.#myIcon }).addTo(\r\n        this.#map\r\n      );\r\n      this.#map.setView([lat, lng], 14, {\r\n        animate: true,\r\n        pan: { duration: 1 },\r\n      });\r\n      return;\r\n      // console.log(this.#lat, this.#lng);\r\n      // L.marker([this.#lat, this.#lng], { icon: this.#myIcon }).addTo(this.#map);\r\n      // this.#map.setView([this.#lat, this.#lng], 14, {\r\n      //   animate: true,\r\n      //   pan: { duration: 1 },\r\n      // });\r\n      // return;\r\n    }\r\n\r\n    if (this.#isFirst) {\r\n      this._loadMap(lat, lng);\r\n      this.#isFirst = false;\r\n    }\r\n  }\r\n}\r\n\r\nconst app = new App();\r\n"],"names":["inputEl","document","getElementById","formEl","ipEl","locationEl","timezoneEl","serviceEl","App","isFirst","this","_getIpAddress","myIcon","L","icon","iconUrl","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","addEventListener","_newIpAddress","bind","lat","lng","map","setView","tileLayer","attribution","addTo","marker","e","value","trim","focus","ipAddress","undefined","slice","url","res","fetch","ok","alert","status","statusText","removeLayer","data","json","location","textContent","ip","city","region","postalCode","timezone","isp","split","join"],"version":3,"file":"index.33665f1e.js.map"}