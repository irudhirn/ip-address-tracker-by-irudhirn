const inputEl=document.getElementById("input"),formEl=document.getElementById("form"),ipEl=document.getElementById("ip"),locationEl=document.getElementById("location"),timezoneEl=document.getElementById("timezone"),serviceEl=document.getElementById("service");class App{#t=!0;#e;#i;#o;#n;#s;#a;constructor(){this._getIpAddress(),this.#s=L.icon({iconUrl:"/icon-location.svg",iconSize:[46,56],iconAnchor:[22,94],popupAnchor:[-3,-76],shadowSize:[68,95],shadowAnchor:[22,94]}),formEl.addEventListener("submit",this._newIpAddress.bind(this))}_loadMap(t,e){this.#i=L.map("map").setView([t,e],14),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.#i),this.#a=new L.marker([t,e],{icon:this.#s}).addTo(this.#i)}_newIpAddress(t){t.preventDefault(),""!==inputEl.value&&(this._getIpAddress(inputEl.value.trim()),inputEl.value="",inputEl.focus())}async _getIpAddress(t){void 0!==t&&`${t}`.slice(-3),void 0!==t&&(`${t}`.slice(-3),1)&&(this.#e=`https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA&ipAddress=${t}`),void 0===t&&(this.#e="https://geo.ipify.org/api/v2/country,city?apiKey=at_X14vTlksv2FC3UNNDCLcSNc3S4fMA");const e=await fetch(this.#e);if(!e.ok)return void alert(`Error ${e.status}. ${e.statusText}`);this.#t||this.#i.removeLayer(this.#a);const i=await e.json(),{lat:o}=i.location,{lng:n}=i.location;if(ipEl.textContent=i.ip,locationEl.textContent=`${i.location.city}, ${i.location.region} ${i.location.postalCode?i.location.postalCode:""}`,timezoneEl.textContent=`UTC ${i.location.timezone}`,serviceEl.textContent=i.isp.split(" ").slice(0,3).join(" "),inputEl.value="",console.log(i),!this.#t)return this.#a=new L.marker([o,n],{icon:this.#s}).addTo(this.#i),void this.#i.setView([o,n],14,{animate:!0,pan:{duration:1}});this.#t&&(this._loadMap(o,n),this.#t=!1)}}const app=new App;
//# sourceMappingURL=index.98b0ea9f.js.map
